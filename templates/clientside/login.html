<!doctype html>
<html>
<head>
<meta charset="utf-8">
<!--footer-->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
<!--For responsive		-->
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
   <title>Login</title>
<!--font family-->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@500&display=swap" rel="stylesheet">
<!--font-->
<link rel="shortcut icon" href="../static/assets/images/caduceus_logo.png">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<!--Bootstra CSS	-->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<!--Custom Style CSS	-->

<link rel="stylesheet" href="{{url_for('static', path='/assets/css/login.css')}}" type="text/css">
<link rel="shortcut icon" href="../static/assets/images/caduceus_logo.png">
</head>
<body>
   <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
      </symbol>
      <symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
      </symbol>
      <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
      </symbol>
    </svg>
<br><br>

<div class="box-form">
	<div class="left">
		<div class="overlay">
		<h1></h1>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
		<span>
			<!--<p>login with social media</p>
			<a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
			<a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>-->&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
		</div>
	</div>
	<div class="right">
      <center><img src="../static/assets/images/logo.png" alt="" width="150px" height="80px" style=""></center><br>
      <h4>Sign in</h4>
      <form action="http://127.0.0.1:8000/users/login" method="POST" id="loginForm">
      <div id="failedLogin"></div>
      <div class="inputs">
         <input type="text" name="user_email" placeholder="User name">
         <br>
         <input type="password" name="user_password" placeholder="Password">
      </div><br>
      <div class="remember-me--forget-password">
      <label class="checkbox">
            <input type="checkbox" value="remember-me" id="remember_me">Remember me
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         <a href="forgot" class="forgot-password">Forgot password?</a></label>
         </label>
   
      </div>
         
         <br>  <br>
         <button class="btn">Sign in</button>
            <br>  <br>  <br>  <br>  <br>  <br>
         <p>Don't have an account? <a href="register" style="color:#1904E5" class="creat-account">Creat Your Account</a> it takes less than a minute</p>
         
      </form>
         <a href="/users"><button class="btn"><i class="fa fa-home"></i></button></a>

      </div>

<script src="{{url_for('static', path='/assets/js/jquery-3.4.1.min.js')}}" type="text/javascript" > </script>	
<!--Bootstra JS	-->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<!--Owl Carousel	-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" type="text/javascript" > </script>	
<!--Custom JS	-->
<script src="{{url_for('static', path='/assets/js/custom.js')}}" type="text/javascript" > </script>
<!-- flatpickr  -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<!-- moment js  -->
<script src="https://momentjs.com/downloads/moment-with-locales.min.js"></script>
<!-- datepicker  -->
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

<!--for remember me scrpt-->
<script src="https://code.jquery.com/jquery-1.9.1.js"></script>
<script src="{{url_for('static', path='/assets/js/sessionchecker.js')}}"></script>
<script>

    $(function() {

        if (localStorage.chkbx && localStorage.chkbx != '') {
            $('#remember_me').attr('checked', 'checked');
            $('#xip_Name').val(localStorage.username);
            $('#xip_Password').val(localStorage.pass);
        } else {
            $('#remember_me').removeAttr('checked');
            $('#xip_Name').val('');
            $('#xip_Password').val('');
        }

        $('#remember_me').click(function() {

            if ($('#remember_me').is(':checked')) {
                // save username and password
                localStorage.username = $('#xip_Name').val();
                localStorage.pass = $('#xip_Password').val();
                localStorage.chkbx = $('#remember_me').val();
            } else {
                localStorage.usrname = '';
                localStorage.pass = '';
                localStorage.chkbx = '';
            }
        });
    });

    
function alertLoginFailure(message) {
   $('#failedLogin').append(
      '<div class="alert alert-danger alert-dismissible fade show d-flex align-items-center" role="alert">' + 
         '<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/>' + '</svg>' +
         '<div>' + message + '</div>' + '<a type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">' + '</a>' + '</div>'
   )
}

$("#loginForm").submit(function(e) {
    e.preventDefault();
    var frm = $("#loginForm");
    var data = {};
    $.each(this, function(i, v){
        var input = $(v);
        data[input.attr("name")] = input.val();
        delete data["undefined"];
    });
    $.ajax({
        contentType:"application/json; charset=utf-8",
        type:frm.attr("method"),
        url:frm.attr("action"),
        dataType:'text',
        data: JSON.stringify(data),
        success: function(data) {
         const type = document.cookie

         if (type == 'type=Client'){
            window.open("appointments", "_self").reload()
         }

         if (type == 'type=Doctor'){
            window.open("http://127.0.0.1:8000/prescription", "_self").reload()
         }

         if (type == 'type=Employee'){
            window.open("http://127.0.0.1:8000/payment", "_self").reload()
         }

         if (type == 'type=Admin'){
            window.open("http://127.0.0.1:8000/admin", "_self").reload()
         }
        },
        error: function(error) {
         resAlert = error.responseText.slice(11,-2);
         alertLoginFailure(resAlert);
        }
    })
});
</script>

</body>
</html>